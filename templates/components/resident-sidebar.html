<!-- Mobile Sidebar Overlay -->
<div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>

<!-- Resident Sidebar -->
<aside id="sidebar" class="fixed inset-y-0 left-0 z-40 w-64 flex flex-col transform transition-transform duration-300 lg:translate-x-0 bg-white border-r border-gray-200 shadow-sm -translate-x-full lg:translate-x-0">
  <!-- Logo -->
  <div class="flex items-center justify-center h-16 border-b border-gray-200">
    <a class="flex items-center">
      <img src="{{ url_for('static', filename='images/iserbisyo_icon.png') }}" alt="iSerbisyo Logo" class="h-6 sm:h-8 w-auto mr-2">
      <span class="text-base sm:text-lg font-bold text-gray-900 hidden sm:block">iSerbisyo</span>
      <span class="text-sm font-bold text-gray-900 sm:hidden">iS</span>
    </a>
  </div>
  
  <!-- Resident info -->
  <div class="flex flex-col items-center p-3 sm:p-4 border-b border-gray-200">
    <div class="relative w-12 sm:w-16 h-12 sm:h-16 rounded-full bg-purple-100 flex items-center justify-center mb-2 border-2 border-purple-200">
      <span class="text-lg sm:text-xl font-bold text-purple-600" id="resident-initial">
        {% if current_user and current_user.name %}
          {{ current_user.name[0].upper() }}
        {% else %}
          R
        {% endif %}
      </span>
      <div class="absolute bottom-0 right-0 w-3 sm:w-4 h-3 sm:h-4 rounded-full bg-green-500 border-2 border-white"></div>
    </div>
    <h5 class="text-xs sm:text-sm font-semibold text-gray-900 mb-0.5 text-center truncate max-w-full px-2" id="resident-name">
      {% if current_user and current_user.name %}
        {{ current_user.name }}
      {% else %}
        Resident User
      {% endif %}
    </h5>
    <span class="inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800" id="resident-role">
      <span class="w-1.5 h-1.5 mr-1 rounded-full bg-purple-500"></span>
      Resident
    </span>
  </div>
  
  <!-- Navigation -->
  <div class="flex-1 overflow-y-auto py-3 sm:py-4 px-2 sm:px-3">
    <ul class="space-y-1">
      <!-- Dashboard Link -->
      <li>
        <a href="{{ url_for('resident.dashboard') }}" class="nav-link flex items-center px-3 sm:px-4 py-2.5 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-100 group transition-all duration-200 min-h-[44px]">
          <i class="fas fa-gauge-high w-4 sm:w-5 h-4 sm:h-5 text-purple-500 mr-2 sm:mr-2.5"></i>
          <span class="text-xs sm:text-sm">Dashboard</span>
        </a>
      </li>
      
      <!-- Certificate Requests -->
      <li>
        <a href="{{ url_for('resident.certificates') }}" class="nav-link flex items-center px-3 sm:px-4 py-2.5 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-100 group transition-all duration-200 min-h-[44px]">
          <i class="fas fa-certificate w-4 sm:w-5 h-4 sm:h-5 text-purple-500 mr-2 sm:mr-2.5"></i>
          <span class="text-xs sm:text-sm">Certificate Requests</span>
          {% if notifications.pending_certificates > 0 %}
          <span id="pending-certificates-badge" class="ml-auto inline-flex items-center px-1.5 sm:px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
            {{ notifications.pending_certificates }}
          </span>
          {% endif %}
        </a>
      </li>
      
      <!-- Announcements -->
      <li>
        <a href="{{ url_for('resident.announcements') }}" class="nav-link flex items-center px-3 sm:px-4 py-2.5 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-100 group transition-all duration-200 min-h-[44px]">
          <i class="fas fa-bullhorn w-4 sm:w-5 h-4 sm:h-5 text-purple-500 mr-2 sm:mr-2.5"></i>
          <span class="text-xs sm:text-sm">Announcements</span>
          {% if notifications.new_announcements > 0 %}
          <span id="new-announcements-badge" class="ml-auto inline-flex items-center px-1.5 sm:px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
            {{ notifications.new_announcements }}
          </span>
          {% endif %}
        </a>
      </li>
      
      <!-- Profile -->
      <li>
        <a href="{{ url_for('resident.profile') }}" class="nav-link flex items-center px-3 sm:px-4 py-2.5 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-100 group transition-all duration-200 min-h-[44px]">
          <i class="fas fa-user w-4 sm:w-5 h-4 sm:h-5 text-purple-500 mr-2 sm:mr-2.5"></i>
          <span class="text-xs sm:text-sm">My Profile</span>
        </a>
      </li>
    </ul>
    
    <!-- Divider -->
    <div class="my-4 border-t border-gray-200"></div>
    
    <!-- Quick Actions -->
    <div class="px-2">
      <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Quick Actions</p>
      <ul class="space-y-1">
        <li>
          <a href="{{ url_for('resident.certificates') }}" class="flex items-center px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg group transition-all duration-200">
            <i class="fas fa-plus w-4 h-4 text-gray-400 mr-2 group-hover:text-purple-500"></i>
            <span>Request Certificate</span>
          </a>
        </li>
        <li>
          <a href="{{ url_for('resident.announcements') }}" class="flex items-center px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg group transition-all duration-200">
            <i class="fas fa-envelope w-4 h-4 text-gray-400 mr-2 group-hover:text-purple-500"></i>
            <span>View Updates</span>
          </a>
        </li>
        <li>
          <a href="{{ url_for('resident.profile') }}" class="flex items-center px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg group transition-all duration-200">
            <i class="fas fa-user w-4 h-4 text-gray-400 mr-2 group-hover:text-purple-500"></i>
            <span>Update Profile</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
  
  <!-- Settings -->
  <div class="border-t border-gray-200 p-3 sm:p-4">
    <a href="{{ url_for('resident.settings') }}" class="flex items-center px-3 py-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg group transition-all duration-200">
      <i class="fas fa-cog w-4 h-4 text-gray-400 mr-2 group-hover:text-purple-500"></i>
      <span>Settings</span>
    </a>
  </div>
</aside>

<script>
  // Highlight current page
  document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;
    const navLinks = document.querySelectorAll('.nav-link');
    
    navLinks.forEach(link => {
      const href = link.getAttribute('href');
      
      // Check if the current path matches the link href
      if (currentPath === href || (currentPath.endsWith('/') && href === currentPath.slice(0, -1))) {
        // Remove existing active styles from all links
        navLinks.forEach(l => {
          l.classList.remove('bg-purple-50', 'text-purple-700', 'border-r-2', 'border-purple-500');
          l.classList.add('text-gray-900');
        });
        
        // Add active styles to current page
        link.classList.remove('text-gray-900');
        link.classList.add('bg-purple-50', 'text-purple-700', 'border-r-2', 'border-purple-500');
      }
    });
  });
</script>