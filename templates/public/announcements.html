<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Latest Barangay Announcements - i-Serbisyo. Stay updated with community news, events, and important notices.">
    <meta name="keywords" content="barangay announcements, community news, events, notices, updates">
    <meta name="author" content="i-Serbisyo">
    
    <title>Announcements - i-Serbisyo</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/iserbisyo_icon.png') }}">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-in': 'slideIn 0.3s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateX(-10px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Alpine.js for interactive components -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Navigation Loader -->
    <script src="../assets/js/navigation-loader.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body class="bg-gray-50">
    <!-- Loading Screen -->
    {% include 'components/loading-screen.html' %}
    
    <!-- Navigation Container -->
    <!-- Include your original navigation -->
    {% include 'components/navigation.html' %}

    <!-- Page Header -->
    <div class="relative pt-16 overflow-hidden" style="background-image: url('../../static/images/landing_page_bg.png'); background-size: cover; background-position: center; background-repeat: no-repeat;">
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Community Announcements</h1>
                <p class="text-xl text-blue-100 max-w-3xl mx-auto">
                    Stay informed with the latest news, events, and important updates from your barangay.
                </p>
            </div>
        </div>
    </div>

    <!-- Breadcrumb -->
    <div class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center space-x-2 py-3 text-sm">
                <a href="{{ url_for('public.index') }}" class="text-gray-500 hover:text-gray-700">Home</a>
                <svg class="h-4 w-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                </svg>
                <span class="text-gray-900 font-medium">Announcements</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="py-12">
        <!-- Featured Announcement -->
        {% set featured_announcement = announcements.items | selectattr('is_featured', 'equalto', True) | first %}
        {% if featured_announcement %}
        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
            {% set category_gradients = {
                'urgent': 'from-red-500 to-red-600',
                'events': 'from-green-500 to-green-600',
                'health': 'from-blue-500 to-blue-600',
                'services': 'from-purple-500 to-purple-600',
                'general': 'from-gray-600 to-gray-700'
            } %}
            <div class="bg-gradient-to-r {{ category_gradients.get(featured_announcement.category, 'from-gray-600 to-gray-700') }} rounded-xl shadow-lg overflow-hidden">
                <div class="p-8 text-white">
                    <div class="flex items-center mb-4">
                        {% if featured_announcement.category == 'urgent' %}
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-red-800 text-red-100 mr-3">
                            <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            {{ featured_announcement.category|upper }}
                        </span>
                        {% else %}
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-black/20 text-white mr-3">
                            {{ featured_announcement.category|upper }}
                        </span>
                        {% endif %}
                        <span class="text-white/80 text-sm">Posted {{ featured_announcement.created_at.strftime('%B %d, %Y') }}</span>
                    </div>
                    <h2 class="text-2xl font-bold mb-3">{{ featured_announcement.title }}</h2>
                    <p class="text-white/90 mb-4 leading-relaxed">
                        {% if featured_announcement.content|length > 200 %}
                            {{ featured_announcement.content[:200] }}...
                        {% else %}
                            {{ featured_announcement.content }}
                        {% endif %}
                    </p>
                    <button class="bg-white text-gray-800 px-6 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors duration-200">
                        Read Full Notice
                    </button>
                </div>
            </div>
        </section>
        {% endif %}

        <!-- Announcements Grid -->
        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Announcements -->
                <div class="lg:col-span-2">
                    {% if announcements.items %}
                        {% set non_featured = announcements.items | rejectattr('is_featured', 'equalto', True) | list %}
                        {% if non_featured %}
                        <div class="space-y-6">
                            {% for announcement in non_featured %}
                            <!-- Announcement {{ loop.index }} -->
                            <article class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                                {% if announcement.featured_image %}
                                <img class="w-full h-48 object-cover" src="{{ url_for('static', filename='uploads/announcements/' + announcement.featured_image) }}" alt="{{ announcement.title }}">
                                {% endif %}
                                <div class="p-6">
                                    <div class="flex items-center mb-3">
                                        {% set category_colors = {
                                            'urgent': 'bg-red-100 text-red-800',
                                            'events': 'bg-green-100 text-green-800',
                                            'health': 'bg-blue-100 text-blue-800',
                                            'services': 'bg-purple-100 text-purple-800',
                                            'general': 'bg-gray-100 text-gray-800'
                                        } %}
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium {{ category_colors.get(announcement.category, 'bg-gray-100 text-gray-800') }} mr-2">
                                            {{ announcement.category|title if announcement.category else 'General' }}
                                        </span>
                                        <span class="text-gray-500 text-sm">{{ announcement.created_at.strftime('%B %d, %Y') }}</span>
                                    </div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-3">{{ announcement.title }}</h3>
                                    <p class="text-gray-600 mb-4">
                                        {% if announcement.content|length > 150 %}
                                            {{ announcement.content[:150] }}...
                                        {% else %}
                                            {{ announcement.content }}
                                        {% endif %}
                                    </p>
                                    
                                    {% if announcement.event_date or announcement.event_location %}
                                    <div class="mb-4 space-y-2">
                                        {% if announcement.event_date %}
                                        <div class="flex items-center text-sm text-gray-500">
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                            </svg>
                                            {{ announcement.event_date.strftime('%B %d, %Y') }}
                                            {% if announcement.event_time %}
                                                at {{ announcement.event_time.strftime('%I:%M %p') }}
                                            {% endif %}
                                        </div>
                                        {% endif %}
                                        {% if announcement.event_location %}
                                        <div class="flex items-center text-sm text-gray-500">
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                            </svg>
                                            {{ announcement.event_location }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% endif %}
                                    
                                    <div class="flex items-center justify-between">
                                        <div class="text-sm text-gray-500">
                                            {% if announcement.views_count %}
                                                {{ announcement.views_count }} views
                                            {% endif %}
                                        </div>
                                        <a href="#" class="text-primary-600 hover:text-primary-700 font-medium text-sm">Read More â†’</a>
                                    </div>
                                </div>
                            </article>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="text-center py-12">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <h3 class="mt-2 text-lg font-medium text-gray-900">No announcements yet</h3>
                            <p class="mt-1 text-gray-500">Check back later for community updates and announcements.</p>
                        </div>
                        {% endif %}
                    {% else %}
                    <div class="text-center py-12">
                        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <h3 class="mt-2 text-lg font-medium text-gray-900">No announcements yet</h3>
                        <p class="mt-1 text-gray-500">Check back later for community updates and announcements.</p>
                    </div>
                    {% endif %}
                    
                    <!-- Pagination -->
                    {% if announcements.pages > 1 %}
                    <div class="flex items-center justify-between mt-8 pt-6 border-t border-gray-200">
                        <div class="flex-1 flex justify-between sm:hidden">
                            {% if announcements.has_prev %}
                            <a href="{{ url_for('public.announcements', page=announcements.prev_num) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                Previous
                            </a>
                            {% endif %}
                            {% if announcements.has_next %}
                            <a href="{{ url_for('public.announcements', page=announcements.next_num) }}" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                                Next
                            </a>
                            {% endif %}
                        </div>
                        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                            <div>
                                <p class="text-sm text-gray-700">
                                    Showing
                                    <span class="font-medium">{{ ((announcements.page - 1) * announcements.per_page) + 1 }}</span>
                                    to
                                    <span class="font-medium">{{ announcements.page * announcements.per_page if announcements.page * announcements.per_page < announcements.total else announcements.total }}</span>
                                    of
                                    <span class="font-medium">{{ announcements.total }}</span>
                                    results
                                </p>
                            </div>
                            <div>
                                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                    {% if announcements.has_prev %}
                                    <a href="{{ url_for('public.announcements', page=announcements.prev_num) }}" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">Previous</span>
                                        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                                        </svg>
                                    </a>
                                    {% endif %}

                                    {% set start_page = [1, announcements.page - 2]|max %}
                                    {% set end_page = [announcements.pages, announcements.page + 2]|min %}

                                    {% if start_page > 1 %}
                                    <a href="{{ url_for('public.announcements', page=1) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">1</a>
                                    {% if start_page > 2 %}
                                    <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">...</span>
                                    {% endif %}
                                    {% endif %}

                                    {% for page_num in range(start_page, end_page + 1) %}
                                    {% if page_num == announcements.page %}
                                    <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-primary-50 text-sm font-medium text-primary-600">{{ page_num }}</span>
                                    {% else %}
                                    <a href="{{ url_for('public.announcements', page=page_num) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">{{ page_num }}</a>
                                    {% endif %}
                                    {% endfor %}

                                    {% if end_page < announcements.pages %}
                                    {% if end_page < announcements.pages - 1 %}
                                    <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">...</span>
                                    {% endif %}
                                    <a href="{{ url_for('public.announcements', page=announcements.pages) }}" class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">{{ announcements.pages }}</a>
                                    {% endif %}

                                    {% if announcements.has_next %}
                                    <a href="{{ url_for('public.announcements', page=announcements.next_num) }}" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                        <span class="sr-only">Next</span>
                                        <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                        </svg>
                                    </a>
                                    {% endif %}
                                </nav>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <div class="space-y-6">
                        <!-- Quick Links -->
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                            <div class="p-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h3>
                                <div class="space-y-3">
                                    <a href="{{ url_for('public.officials') }}" class="flex items-center text-gray-700 hover:text-primary-600 transition-colors duration-200">
                                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                        </svg>
                                        Barangay Officials
                                    </a>
                                    <a href="{{ url_for('public.contact') }}" class="flex items-center text-gray-700 hover:text-primary-600 transition-colors duration-200">
                                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                        </svg>
                                        Contact Us
                                    </a>
                                    <a href="{{ url_for('auth.login') }}" class="flex items-center text-gray-700 hover:text-primary-600 transition-colors duration-200">
                                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                        Request Documents
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Info -->
                        <div class="bg-primary-600 rounded-xl shadow-lg overflow-hidden text-white">
                            <div class="p-6">
                                <h3 class="text-lg font-semibold mb-4">Have Questions?</h3>
                                <p class="text-primary-100 mb-4">
                                    Need more information about any announcement? Contact our office for assistance.
                                </p>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                        </svg>
                                        (123) 456-7890
                                    </div>
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                        </svg>
                                        info@barangay.gov.ph
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <!-- Footer -->
    {% include 'components/footer.html' %}

    <!-- JavaScript -->
    <script>
        // Simple page enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover animations
            const style = document.createElement('style');
            style.textContent = `
                .announcement-card {
                    transition: all 0.3s ease;
                }
                .announcement-card:hover {
                    transform: translateY(-2px);
                }
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fadeIn 0.3s ease-out;
                }
            `;
            document.head.appendChild(style);
            
            // Add fade-in animation to announcement cards
            const cards = document.querySelectorAll('article');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('animate-fade-in');
                }, index * 100);
            });
        });
    </script>
    
    <!-- Main JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>